# Unified Project Structure
## Real-time Pitch Visualizer

**Version**: 2.0  
**Source**: Technical Architecture Document  
**Purpose**: Define file organization, module structure, and naming conventions
**Last Updated**: Current implementation - Yew-based frontend architecture

> **Architecture Migration Note**: This project has migrated from pure WebAssembly + JavaScript to a Rust frontend using Yew. The architecture now uses components compiled to WebAssembly, providing a unified Rust codebase with React-like development experience.

---

## Project Organization

```
pitch-toy/
├── src/                       # Rust frontend application
│   ├── lib.rs, main.rs        # Application entry points
│   ├── audio/                 # Audio processing core
│   ├── components/            # UI components
│   ├── services/              # Application services and business logic
│   ├── hooks/                 # Custom hooks
│   ├── types/                 # Type definitions and data structures
│   └── *.rs                   # Global utilities (browser_compat, error_manager, etc.)
├── web/                       # Static web assets
│   └── *.css                  # Styling and themes
├── build-configs/             # Build configuration files
│   ├── dev.toml              # Development build settings
│   └── release.toml          # Production build settings
├── dist/                      # Generated distribution files (build output)
├── target/                    # Rust compilation artifacts
├── tests/                     # Test suites and documentation
│   └── manual-testing/       # Manual testing guides and results
├── docs/                      # Project documentation
│   ├── architecture/          # Technical architecture documentation
│   ├── stories/               # Development user stories
│   └── *.md                   # Project documentation files
├── bmad-core/                 # BMAD methodology framework
├── index.html                 # Application entry point
├── Cargo.toml, Cargo.lock     # Rust project configuration
├── build.sh, serve.sh         # Development automation scripts
└── README.md, LICENSE         # Project metadata
```

## Module Responsibilities

### Rust Frontend (`src/`)

**Core Application Files**
- `lib.rs`: Application entry point with wasm_bindgen exports
- `main.rs`: Application bootstrapping and initialization

**`src/audio/`**
- Audio processing core with specialized modules
- Real-time audio processing, pitch detection, and signal analysis
- Performance monitoring, benchmarking, and stress testing
- Educational content validation and test reporting

**`src/components/`**
- UI components built with Yew
- Audio control interfaces and real-time data visualization
- Debug panels, error displays, and performance monitoring UI
- Browser compatibility fallbacks and test signal generators

**`src/services/`**
- Application service layer and business logic
- Audio engine service coordination
- Centralized error handling and reporting

**`src/hooks/`**
- Custom Yew hooks for shared component logic
- Error handling and state management utilities

**`src/types/`**
- Type definitions and data structures
- Audio-related types and interfaces

**Global Utilities**
- `browser_compat.rs`: Cross-browser compatibility layer
- `error_manager.rs`: Global error management system
- `performance_monitor.rs`: System-wide performance monitoring

### Static Assets (`web/`)

**CSS Styling**
- Debug interface themes and component styling
- Performance monitoring visualization styles

### Build Configuration (`build-configs/`)

**Configuration Files**
- `dev.toml`: Development build settings and debug features
- `release.toml`: Production optimization and distribution settings

## File Naming Conventions

### Rust Files
- Snake case: `pitch_detector.rs`, `interval_calc.rs`
- Module files: `mod.rs` for module exports
- Library entry: `lib.rs` for crate root

### CSS Files
- Kebab case: `debug-interface.css`
- Descriptive names indicating purpose
- Component-specific styling

### TOML Configuration Files
- Snake case: `dev.toml`, `release.toml`
- Purpose-specific configuration files
- Build and deployment configurations

### Documentation
- Kebab case: `tech-stack.md`, `project-structure.md`
- Story files: `{epic}.{story}.story.md` format
- Index files: `index.md` for directory overviews

## Generated Directories

### `dist/` Directory
- Generated by build process (cargo/build.sh)
- Contains compiled WebAssembly and optimized assets
- Production-ready distribution files
- **Do not edit manually** - regenerated on each build

### `target/` Directory
- Generated by Cargo build system
- Contains Rust compilation artifacts
- Debug and release build outputs
- **Do not edit manually** - managed by Cargo

## Build Outputs

### Development Build
```bash
cargo build
# or
./build.sh dev
```

### Production Build  
```bash
cargo build --release
# or
./build.sh release
```

Generated files in `dist/`:
- WebAssembly binaries and JavaScript bindings
- Optimized static assets
- Production-ready distribution files

## Development Infrastructure

### Development Server
**Trunk-based Development**: `trunk serve` - Integrated build and dev server
- **Hot Reload**: Automatic rebuilds on file changes
- **Asset Processing**: Handles WASM, CSS, and static files
- **CORS Support**: Proper headers for local development

**Build Automation**: `./build.sh` - Automated build process
- **Rust Compilation**: trunk + cargo-based compilation
- **Asset Processing**: Static asset optimization
- **Configuration Management**: Dev/release build configurations

**Access**: http://localhost:8080 (trunk default port)

### Testing Infrastructure
**Manual Testing Framework**: Comprehensive testing documentation
- Manual testing guides and procedures
- Test result tracking and reporting
- Browser compatibility validation procedures
- Performance testing methodologies 